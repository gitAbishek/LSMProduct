function masteriyo_select_single_course_page_tab(e,t){jQuery(".mto-tab").removeClass("active-tab"),jQuery(".tab-content").addClass("mto-hidden"),jQuery(e.target).addClass("active-tab"),jQuery(t).removeClass("mto-hidden")}!function(l,c){var a=function(e,t){e=c.rootApiUrl+"masteriyo/v1/courses/reviews/"+e;l.ajax({type:"delete",headers:{"X-WP-Nonce":c.nonce},url:e,success:t.onSuccess,error:t.onError,complete:t.onComplete})},n=function(e,t){var n=c.rootApiUrl+"masteriyo/v1/courses/reviews";l.ajax({type:"post",headers:{"X-WP-Nonce":c.nonce},url:n,data:e,success:t.onSuccess,error:t.onError,complete:t.onComplete})},r=function(e,t,n){e=c.rootApiUrl+"masteriyo/v1/courses/reviews/"+e;l.ajax({type:"put",headers:{"X-WP-Nonce":c.nonce},url:e,data:t,success:n.onSuccess,error:n.onError,complete:n.onComplete})},s=function(e){return'<div class="mto-notify-message mto-alert mto-danger-msg"><span>'+e+"</span></div>"},m=function(e){return'<div class="mto-notify-message mto-alert mto-success-msg"><span>'+e+"</span></div>"},d=function(){var e=window.prompt(c.labels.type_confirm);return null!==e&&("CONFIRM"===e||(alert(c.labels.try_again),!1))},u=function(e){e.find(".mto-notify-message").remove()},f=function(e){for(e=""===e?0:e,e=parseFloat(e),html="",max_rating=c.max_course_rating,e=(e=e>max_rating?max_rating:e)<0?0:e,stars=c.rating_indicator_markup,rating_floor=Math.floor(e),i=1;i<=rating_floor;i++)html+=stars.full_star;for(rating_floor<e&&(html+=stars.half_star),rating_ceil=Math.ceil(e),i=rating_ceil;i<max_rating;i++)html+=stars.empty_star;return html},p={$create_revew_form:l(".mto-submit-review-form"),create_review_form_class:".mto-submit-review-form",init:function(){l(document).ready(function(){p.init_rating_widget(),p.init_menu_toggler(),p.init_faqs_accordions_handler(),p.init_curriculum_accordions_handler(),p.init_create_reviews_handler(),p.init_edit_reviews_handler(),p.init_delete_reviews_handler(),p.init_reply_btn_handler()})},init_menu_toggler:function(){l(document.body).on("click",".menu-toggler",function(){return 0==l(this).siblings(".menu").height()?(l(this).siblings(".menu").height("auto"),void l(this).siblings(".menu").css("max-height","999px")):void l(this).siblings(".menu").height(0)})},init_rating_widget:function(){l(p.create_review_form_class).on("click",".mto-rating-input-icon",function(){var e=l(this).index()+1;p.$create_revew_form.find('input[name="rating"]').val(e),l(this).closest(".mto-rstar").html(f(e))})},init_create_reviews_handler:function(){var t=!1;p.$create_revew_form.on("submit",function(e){e.preventDefault();var i=p.$create_revew_form,o=i.find('button[type="submit"]'),e={title:i.find('input[name="title"]').val(),rating:i.find('input[name="rating"]').val(),content:i.find('[name="content"]').val(),parent:i.find('[name="parent"]').val(),course_id:i.find('[name="course_id"]').val()};t||"yes"===i.data("edit-mode")||(t=!0,o.text(c.labels.submitting),u(i),n(e,{onSuccess:function(){i.append(m(c.labels.submit_success)),window.location.reload()},onError:function(e,t,n){e.responseJSON&&e.responseJSON.message&&(n=e.responseJSON.message),i.append(s(n)),o.text(c.labels.submit)},onComplete:function(){t=!1}}))})},init_reply_btn_handler:function(){l(document.body).on("click",".mto-reply-course-review",function(e){e.preventDefault();var t=p.$create_revew_form,n=l(this).closest(".mto-course-review"),i=n.data("id"),e=t.find('button[type="submit"]'),n=n.find(".title").data("value");t.find('input[name="title"]').val(""),t.find('input[name="rating"]').val(0),t.find(".mto-rstar").html(f(0)),t.find('[name="content"]').val(""),t.find('[name="parent"]').val(i),e.text(c.labels.submit),l(".mto-form-title").text(c.labels.reply_to+": "+n),t.find(".mto-title, .mto-rating").hide(),t.find('[name="content"]').focus(),l("html, body").animate({scrollTop:t.offset().top},500)})},init_edit_reviews_handler:function(){l(document.body).on("click",".mto-edit-course-review",function(e){e.preventDefault();var t=p.$create_revew_form,n=l(this).closest(".mto-course-review"),i=n.data("id"),o=t.find('button[type="submit"]'),a=n.find(".title").data("value"),r=n.find(".rating").data("value"),s=n.find(".content").data("value"),e=n.find('[name="parent"]').val();t.data("edit-mode","yes"),t.data("review-id",i),t.find('input[name="title"]').val(a),t.find('input[name="rating"]').val(r),t.find(".mto-rstar").html(f(r)),t.find('[name="content"]').val(s),t.find('[name="parent"]').val(e),o.text(c.labels.update),n.is(".is-course-review-reply")?(l(".mto-form-title").text(c.labels.edit_reply),t.find(".mto-title, .mto-rating").hide(),t.find('[name="content"]').focus()):(l(".mto-form-title").text(c.labels.edit_review+": "+a),t.find(".mto-title, .mto-rating").show(),t.find('input[name="title"]').focus()),l("html, body").animate({scrollTop:t.offset().top},500)});var n=!1;p.$create_revew_form.on("submit",function(e){e.preventDefault();var i=p.$create_revew_form,t=i.data("review-id"),o=i.find('button[type="submit"]'),e={title:i.find('input[name="title"]').val(),rating:i.find('input[name="rating"]').val(),content:i.find('[name="content"]').val(),parent:i.find('[name="parent"]').val(),course_id:i.find('[name="course_id"]').val()};n||"yes"!==i.data("edit-mode")||(n=!0,o.text(c.labels.submitting),u(i),r(t,e,{onSuccess:function(){i.append(m(c.labels.update_success)),o.text(c.labels.update),window.location.reload()},onError:function(e,t,n){e.responseJSON&&e.responseJSON.message&&(n=e.responseJSON.message),i.append(s(n)),o.text(c.labels.update)},onComplete:function(){n=!1}}))})},init_delete_reviews_handler:function(){var n={};l(document.body).on("click",".mto-delete-course-review",function(e){e.preventDefault();var i=l(this).closest(".mto-course-review"),o=l(this),t=i.data("id");!n[t]&&d()&&(n[t]=!0,o.find("strong").text(c.labels.deleting),a(t,{onSuccess:function(){i.after(m(c.labels.delete_success)),i.remove()},onError:function(e,t,n){e.responseJSON&&e.responseJSON.message&&(n=e.responseJSON.message),i.append(s(n)),o.find(".text").text(c.labels.delete)},onComplete:function(){n[t]=!1}}))})},init_faqs_accordions_handler:function(){l(document.body).on("click",".mto-faq--item-header",function(){l(this).siblings(".mto-faq--item-body").first().slideToggle("swing")})},init_curriculum_accordions_handler:function(){l(document.body).on("click",".mto-cheader",function(){l(this).parent(".mto-stab--citems").toggleClass("active"),l(".mto-stab--citems").length===l(".mto-stab--citems.active").length&&t(),l(".mto-stab--citems").length===l(".mto-stab--citems").not(".active").length&&n()});var e=!0;function t(){l(".mto-stab--citems").addClass("active"),l(".mto-expand-collape-all").text("Collapse All"),e=!1}function n(){l(".mto-stab--citems").removeClass("active"),l(".mto-expand-collape-all").text("Expand All"),e=!0}l(document.body).on("click",".mto-expand-collape-all",function(){(e?t:n)()});var i=l(".mto-scourse--main").get(0);i&&l(window).scroll(function(){var e=l(".mto-sticky").height(),t=l(window).scrollTop(),n=i.offsetTop,e=n+i.offsetHeight-e;(n<t&&t<e?!0:!1)?l(".mto-sticky").css({position:"sticky",top:"0px"}):l(".mto-sticky").css({position:"relative"})})}};p.init()}(jQuery,window.masteriyo_data);